<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Survey Page</title>
        <script src="https://code.jquery.com/jquery.js"></script>
         <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css"  href="/assets/css/style.css">
    </head>
<body>

    <div class='container'>
      <h1>Fill out this survey form</h1>

         <h4> Name (required)</h4>
        <input  type="text" name="" class="form-control" id="name" required>
        <h4>Link to Photo (required  .jpg files only)</h4>
        <input type="text" name="" class="form-control" id="photo" required>


    <h3> Question 1: On a weeknight, you party real hard</h3>
    <select data-placeholder="" class="chosen-select" id="q1">
        <option value="">Select an Option</option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly Agree)</option>
    </select>

    <h3> Question 2: You believe love at first sight is a real thing </h3>
    <select data-placeholder="" class="chosen-select" id="q2">
        <option value="">Select an Option</option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly Agree)</option>
    </select>

    <h3> Question 3: You have to have kids at some point</h3>
    <select data-placeholder="" class="chosen-select" id="q3">
        <option value="">Select an Option</option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly Agree)</option>
    </select>

    <h3> Question 4: You could live the rest of your life in another country</h3>
    <select data-placeholder="" class="chosen-select" id="q4">
        <option value="">Select an Option</option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly Agree)</option>
    </select>

    <h3> Question 5: You love romantic comedies </h3>
    <select data-placeholder="" class="chosen-select" id="q5">
        <option value="">Select an Option</option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly Agree)</option>
    </select>

    <h3> Question 6: Your mate needs to be in good shape </h3>
    <select data-placeholder="" class="chosen-select" id="q6">
        <option value="">Select an Option</option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly Agree)</option>
    </select>

    <h3> Question 7: You consider yourself primarily creative </h3>
    <select data-placeholder="" class="chosen-select" id="q7">
        <option value="">Select an Option</option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly Agree)</option>
    </select>

    <h3> Question 8: You like to have a wide circle of friends </h3>
    <select data-placeholder="" class="chosen-select" id="q8">
        <option value="">Select an Option</option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly Agree)</option>
    </select>

    <h3> Question 9: You trust reason rather than feelings</h3>
    <select data-placeholder="" class="chosen-select" id="q9">
        <option value="">Select an Option</option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly Agree)</option>
    </select>

    <h3> Question 10: You definitely want to get married.</h3>
    <select data-placeholder="" class="chosen-select" id="q10">
        <option value="">Select an Option</option>
        <option value="1">1(Strongly Disagree)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5(Strongly Agree)</option>
    </select>
    <br>
    <br>
    <button type="submit" class="btn btn-default" id="submit">Submit</button>


<footer class="footer">
    <div class="container">
        <p><a  class="addon" href="/api/friends">API Friends List</a> | <a class="addon" href="https://github.com/cchane4/FriendFinder">GitHub Repo</a></p>
    </div>
</footer>
    </div>
    <div id="resultsModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div id="modal_overhead" class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h2 class="modal-title"><strong>Best Match</strong></h2>
            </div>
            <div class="modal-body">
                <h2 id="matchName"></h2>
                <img id="matchImg" class="img-responsive" src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg" alt="">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

        <script type="text/javascript">

        $("#submit").on("click",(event) => {
            event.preventDefault();
          let inputs = $('.chosen-select');
          let questions = $('.form-control');

           let validate = () => {
             let isValid = true;
               inputs.each(function(){
                if ($(this).val() === "" || $(this).val() === null){
                  isValid = false;
                }
                });
               questions.each(function(){
                if ($(this).val() === "" || $(this).val() === null){
                  isValid = false;
                }
                });
               //console.log(isValid);
                return(isValid);
            }
                                    if (validate()) {
                                      let userData = {
                                            name: $("#name").val(),
                                            photo: $("#photo").val(),
                                            scores: [
                                                $("#q1").val(),
                                                $("#q2").val(),
                                                $("#q3").val(),
                                                $("#q4").val(),
                                                $("#q5").val(),
                                                $("#q6").val(),
                                                $("#q7").val(),
                                                $("#q8").val(),
                                                $("#q9").val(),
                                                $("#q10").val()
                                        ]
                                    };
                                    //console.log(userData);
                                    let currentURL = window.location.origin;
                                    $.post(currentURL + "/api/friends", userData, (data) => {
                                    $("#matchName").text(data.name);
                                    $("#matchImg").attr("src", data.photo);
                                    $("#resultsModal").modal('toggle');
                                         // alert("working");

                                    });
                                }
                                else {
                                    alert("Please fill out all fields before clicking submit");
                                }
                                validate();

                                });


        </script>
</body>

</html>